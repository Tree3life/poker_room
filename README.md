# poker_room

## 简介

网页版在线`打升级`游戏，家乡的一款扑克游戏，websocket， redis做数据存储。 优化：后续前端响应式适配，适配手机，实现 视频&语言功能。

项目当前处于立项阶段。



## 初步设计

#### 规则 

#### 4人

0. 确定分组，第一把 抢先，看谁家先升级 ，另一方 进行阻挠该队伍。

1 . 确定当前 级数（从1开始，队伍每赢一次升一个数字；达到13之后回到下一轮）。

2. 任命当前的 主花色（王&级数牌）

3.出牌 回合制 ： 

- 收底牌的人先出牌

- 出牌规则

  - 回合中首个出牌的人决定本回合的 牌面组合（支持的排面组合有：单张，对子（王是最大的），拖车（大小王对是否允许拖车可配置选项））
  - 主花色的牌一定大于非级数的其他牌
  - 当前级数 数字牌面的牌大于 主花色中的非级数数字牌面的牌
  - 当前回合是否是最后一个回合的判定：当前回合的首个出牌人出完牌之后手中剩余牌数为0
  - 

- 获胜规则

  - 每回合的获胜规则  （擂台法记录本回合赢家）：花色牌型一致，牌面大着获胜；并成为下一回合的首个出牌人

  - 每把游戏的获胜规则 &积分规则：

    （成功阻挠的判定：积分积满 /积分方最后一回合获胜 成功阻挠；两者皆满，积分方可直接跃升两级；若进攻方获胜且积分方积分为0，则进攻方升两级）（积分规则：5分，10/K 记10分 ；当前积分是否允许展示要可配置

  满分：牌的份数x40；牌的份数应当设置为可选的）

- 游戏术语

  - 贴：没有回合发起人所出的花色，且没出主花色；或相同颜色，但是牌面比对家小；主花色，但是牌型不一样的也叫贴。
  - 崩/毙：没有回合发起人的花色，用主花色且相同牌型 大过对家.
  - 叫主/ba：任命主花色（是否允许对家任命、是否允许竞争主花色要可配置）。

- 游戏角色/实体/概念

  - 当前 升级队伍
  - 回合发起人
  - 回合获胜者

  - 当前升级队伍
  - 当前积分队伍
  - 当前积分
  - 上家、下家、对家（队友）
  - 四个人的手牌
  - 桌面杂乱展示之前回合的所有牌
  - 明显展示当前回合的所有牌面



Java多线程控制顺序，参阅Juc.md



花色集合：♥️ ♣️ ♦️ ♠️

数字集合：1 2 3 4 5 6 7 8 9 10 11 12 13

数字展示：A 2 3 4 5 6 7 8 9 10 J Q K

class 扑克牌：｛

花色：

数字（枚举 数字number ，展示数字look）：

｝







5个集合

牌堆集合：大小=份数*54；元素=for循环遍历花色，数字集合。

洗牌/发牌逻辑：固定一个数列（大小等于牌堆集合的索引），对该集合进行打乱。 底牌=2*份数张，从后数；剩余的前面的索引均匀地分为四份，每人一份



基于websocket协议 



表格法+策略模式 实现游戏中回合胜利及本局游戏胜利的规则。
